(()=>{"use strict";var e={635:(e,n,t)=>{var o=t(963),r=t(252);const l={class:"main-content"},a={class:"main-content__flex"};function s(e,n,t,o,s,u){const i=(0,r.up)("Nav-bar"),p=(0,r.up)("Main-grid"),d=(0,r.up)("Footer");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",a,[(0,r.Wm)(i),(0,r.Wm)(p)]),(0,r.Wm)(d)])}const u=t.p+"img/Img-Blur.43c7aaca.png",i={class:"navbar"},p=(0,r.uE)('<img src="'+u+'" data-v-5bdf803e><div class="navbar__skeleton" data-v-5bdf803e></div><div class="navbar__skeleton navbar__skeleton_2" data-v-5bdf803e></div><div class="navbar__skeleton navbar__skeleton_3" data-v-5bdf803e></div><div class="navbar__skeleton navbar__skeleton_2" data-v-5bdf803e></div><div class="navbar__skeleton navbar__skeleton_4" data-v-5bdf803e></div>',6),d=[p];function c(e,n,t,o,l,a){return(0,r.wg)(),(0,r.iD)("div",i,d)}const v={name:"Navbar"};var _=t(744);const h=(0,_.Z)(v,[["render",c],["__scopeId","data-v-5bdf803e"]]),g=h,f=e=>((0,r.dD)("data-v-15f1e01f"),e=e(),(0,r.Cn)(),e),D={class:"footer"},b=f((()=>(0,r._)("div",null,null,-1))),m=f((()=>(0,r._)("button",null,"✖",-1))),q=[b,m];function k(e,n,t,o,l,a){return(0,r.wg)(),(0,r.iD)("footer",D,q)}const y={name:"Footer"},C=(0,_.Z)(y,[["render",k],["__scopeId","data-v-15f1e01f"]]),O=C;var S=t(577);const x={class:"main-grid"},w=["onDragstart","onDrop","onDragenter","onDragleave"],I=["onClick"],V={key:0,class:"squares__numbers"};function B(e,n,t,l,a,s){const u=(0,r.up)("delete-popup");return(0,r.wg)(),(0,r.iD)("section",x,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.squares,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,S.C_)(["squares",[a.onStartIndex===t?"squares_on-drag":"",a.onEnterIndex===t?"squares_on-over":""]]),key:t,draggable:"true",onDragstart:n=>s.onDragStart(n,e,t),onDrop:(0,o.iM)((e=>s.onDrop(e,t)),["prevent"]),onDragenter:(0,o.iM)((e=>s.onDragEnter(t)),["prevent"]),onDragleave:e=>s.onDragLeave(t),onDragend:n[0]||(n[0]=e=>s.onDragEnd()),onDragover:n[1]||(n[1]=(0,o.iM)((()=>{}),["prevent"]))},[(0,r._)("div",{class:(0,S.C_)(["squares__box",[e?e.color:""]]),onClick:n=>s.onSquareClick(e,t)},null,10,I),e&&a.onStartIndex!==t?((0,r.wg)(),(0,r.iD)("div",V,(0,S.zw)(e.count),1)):(0,r.kq)("",!0)],42,w)))),128)),(0,r.Wm)(u,{isOpen:a.isOpenPopup,color:a.popupColor,index:a.popupActiveSquare,deleteCount:a.popupSquareValue,onOnClose:s.onPopupClose,onOnDelete:s.onPopupDelete,onOnDeleteByValue:s.onPopupDeleteByValue},null,8,["isOpen","color","index","deleteCount","onOnClose","onOnDelete","onOnDeleteByValue"]),(0,r._)("button",{onClick:n[2]||(n[2]=(...e)=>s.addSquare&&s.addSquare(...e))},"+")])}var P=t(262);const E=[{color:"green",count:4},{color:"yellow",count:2},{color:"blue",count:5},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],N=E,M=[{color:"green",count:4},{color:"yellow",count:1},{color:"blue",count:5},{color:"yellow",count:8},{color:"blue",count:1},{color:"green",count:4}],j=()=>{const e=Math.floor(6*Math.random());return M[e]},T=j,Z=()=>{const e=localStorage.getItem("squares"),n=e?JSON.parse(e):"";return n},$=e=>{const n=JSON.stringify(e);localStorage.setItem("squares",n)},A=e=>((0,r.dD)("data-v-e76ccf1e"),e=e(),(0,r.Cn)(),e),F=A((()=>(0,r._)("div",{class:"popup__skeleton"},null,-1))),J=A((()=>(0,r._)("div",{class:"popup__skeleton popup__skeleton_2"},null,-1))),W={key:0,class:"popup__extended"};function U(e,n,t,l,a,s){return(0,r.wg)(),(0,r.j4)(o.uT,{name:"right-slide"},{default:(0,r.w5)((()=>[t.isOpen?((0,r.wg)(),(0,r.iD)("section",{key:0,class:(0,S.C_)(["popup",t.isOpen&&"popup_opened"])},[(0,r._)("button",{class:"popup__close-button",onClick:n[0]||(n[0]=n=>e.$emit("onClose"))}),(0,r._)("div",{class:(0,S.C_)(["popup__box",[t.color?t.color:""]])},null,2),F,J,(0,r._)("button",{class:"popup__delete-button",onClick:n[1]||(n[1]=(...e)=>s.onDelete&&s.onDelete(...e))},"Удалить предмет"),a.extendedDeleteButton?((0,r.wg)(),(0,r.iD)("div",W,[(0,r.wy)((0,r._)("input",{type:"text",placeholder:"Введите количество",onKeypress:n[2]||(n[2]=e=>s.isNumber(e)),"onUpdate:modelValue":n[3]||(n[3]=e=>a.inputValue=e)},null,544),[[o.nr,a.inputValue,void 0,{number:!0}]]),(0,r._)("div",null,[(0,r._)("button",{onClick:n[4]||(n[4]=e=>this.extendedDeleteButton=!1)},"Отмена"),(0,r._)("button",{onClick:n[5]||(n[5]=e=>s.onDeleteByValue())},"Подтвердить")])])):(0,r.kq)("",!0),(0,r._)("div",{class:(0,S.C_)(["overlay",t.isOpen&&"overlay_opened"]),onClick:n[6]||(n[6]=n=>e.$emit("onClose"))},null,2)],2)):(0,r.kq)("",!0)])),_:1})}const G={name:"DeletePopup",data(){return{extendedDeleteButton:!1,inputValue:0}},props:{isOpen:{type:Boolean},color:{type:String},index:{type:Number},deleteCount:{type:Number}},emits:["onClose","onDelete","onDeleteByValue"],methods:{onDelete(){this.deleteCount>1?this.extendedDeleteButton=!0:this.$emit("onDelete",this.index)},onDeleteByValue(){this.$emit("onDeleteByValue",this.index,this.inputValue),this.extendedDeleteButton=!1},isNumber(e){if(!/^[0-9]+$/.test(e.key))return e.preventDefault()}},watch:{deleteCount(){this.inputValue=this.deleteCount}}},K=(0,_.Z)(G,[["render",U],["__scopeId","data-v-e76ccf1e"]]),L=K,z={name:"MainGrid",components:{DeletePopup:L},data(){return{squares:[],isOpenPopup:!1,popupSquareValue:0,popupColor:"",popupActiveSquare:0,onStartIndex:"",onEnterIndex:""}},methods:{onDragStart(e,n,t){if(!this.checkSquare(this.squares[t]))return void e.preventDefault();this.onStartIndex=t;const o=[(0,P.IU)(n),(0,P.IU)(t)];e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("square",JSON.stringify(o))},onDragEnter(e){null!==this.squares[e]&&e!==this.onStartIndex||(this.onEnterIndex=e)},onDragLeave(e){this.checkSquare(this.squares[e])&&this.onStartIndex!==e&&(this.onEnterIndex=null)},onDrop(e,n){const t=JSON.parse(e.dataTransfer.getData("square"));this.checkSquare(t[0])&&this.checkSquare(this.squares[n])||this.checkSquare(t[0])&&(this.squares[t[1]]=null,this.squares[n]=t[0])},onDragEnd(){this.onEnterIndex=null,this.onStartIndex=null},checkSquare(e){return null!==e},onSquareClick(e,n){null!==e&&(this.popupSquareValue=e.count,this.popupColor=e.color,this.popupActiveSquare=n,this.isOpenPopup=!0)},onPopupClose(){this.isOpenPopup=!1},onPopupDelete(e){this.isOpenPopup=!1,this.squares[e]=null},onPopupDeleteByValue(e,n){this.isOpenPopup=!1,this.squares[e].count=this.squares[e].count-n,this.squares[e].count<1&&(this.squares[e]=null)},addSquare(){const e=this.squares.findIndex((e=>null===e)),n=T();this.squares[e]={...n}}},mounted(){const e=Z();this.squares=e?[...e]:[...N]},watch:{squares:{handler(e){$(e)},deep:!0}}},H=(0,_.Z)(z,[["render",B],["__scopeId","data-v-77bd8c11"]]),Y=H,Q={name:"Main",components:{NavBar:g,MainGrid:Y,Footer:O}},R=(0,_.Z)(Q,[["render",s]]),X=R;(0,o.ri)(X).mount("#app")}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var l=n[o]={exports:{}};return e[o](l,l.exports,t),l.exports}t.m=e,(()=>{var e=[];t.O=(n,o,r,l)=>{if(!o){var a=1/0;for(p=0;p<e.length;p++){for(var[o,r,l]=e[p],s=!0,u=0;u<o.length;u++)(!1&l||a>=l)&&Object.keys(t.O).every((e=>t.O[e](o[u])))?o.splice(u--,1):(s=!1,l<a&&(a=l));if(s){e.splice(p--,1);var i=r();void 0!==i&&(n=i)}}return n}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[o,r,l]}})(),(()=>{t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)})(),(()=>{t.p="/Vue3-draggable-items/"})(),(()=>{var e={143:0};t.O.j=n=>0===e[n];var n=(n,o)=>{var r,l,[a,s,u]=o,i=0;if(a.some((n=>0!==e[n]))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(u)var p=u(t)}for(n&&n(o);i<a.length;i++)l=a[i],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(p)},o=self["webpackChunkdraggable_items"]=self["webpackChunkdraggable_items"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))})();var o=t.O(void 0,[998],(()=>t(635)));o=t.O(o)})();
//# sourceMappingURL=app.86524424.js.map